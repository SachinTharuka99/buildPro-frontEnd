<!DOCTYPE html>
<html lang="en" dir="ltr">
  <!-- Mirrored from laravel.spruko.com/BuildPro/Vertical-IconSidedar-Light/register-3 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 21 Apr 2025 05:58:47 GMT -->
  <!-- Added by HTTrack --><meta
    http-equiv="content-type"
    content="text/html;charset=UTF-8"
  /><!-- /Added by HTTrack -->
  <head>
    <!-- Meta data -->
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=0"
    />
    <meta
      content="BuildPro - Laravel Bootstrap Admin Template"
      name="description"
    />
    <meta content="Spruko Technologies Private Limited" name="author" />
    <meta
      name="keywords"
      content="laravel admin dashboard, best laravel admin panel, laravel admin dashboard, php admin panel template, blade template in laravel, laravel dashboard template, laravel template bootstrap, laravel simple admin panel,laravel dashboard template,laravel bootstrap 4 template, best admin panel for laravel,laravel admin panel template, laravel admin dashboard template, laravel bootstrap admin template, laravel admin template bootstrap 4"
    />

    <!-- Title -->
    <title>BuildPro - Regiter</title>

    <!--Favicon -->
    <link
      rel="icon"
      href="assets/images/brand/favicon.ico"
      type="image/x-icon"
    />

    <!--Bootstrap css -->
    <link
      href="assets/plugins/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Style css -->
    <link href="assets/css/style.css" rel="stylesheet" />
    <link href="assets/css/dark.css" rel="stylesheet" />
    <link href="assets/css/skin-modes.css" rel="stylesheet" />

    <!-- Animate css -->
    <link href="assets/css/animated.css" rel="stylesheet" />

    <!---Icons css-->
    <link href="assets/css/icons.css" rel="stylesheet" />

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Color Skin css -->
    <link
      id="theme"
      href="assets/colors/color1.css"
      rel="stylesheet"
      type="text/css"
    />

    <style>
      .toggle-switch {
        position: relative;
        display: inline-block;
        width: 80px;
        height: 40px;
      }

      .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .slider {
        position: absolute;
        cursor: pointer;
        background-color: #6db664;
        transition: 0.4s;
        border-radius: 34px;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
      }

      .slider::before {
        position: absolute;
        content: "üíÅ";
        height: 32px;
        width: 32px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
      }

      input:checked + .slider {
        background-color: #6db664;
      }

      input:checked + .slider::before {
        transform: translateX(40px);
        content: "üë∑";
      }

      .role-label {
        font-weight: bold;
        color: #6db664;
      }
    </style>
  </head>
  <body class="h-100vh page-style1">
    <div class="page">
      <div class="page-single">
        <div class="p-5">
          <div class="row">
            <div class="col mx-auto">
              <div class="row justify-content-center">
                <div class="col-lg-9 col-xl-8">
                  <div class="card-group mb-0">
                    <div class="card p-4">
                      <div class="card-body">
                        <div class="text-center title-style mb-6">
                          <h1 class="mb-2">Register</h1>
                          <hr />
                          <!-- <p class="text-muted">Create New Account</p> -->
                        </div>

                        <div class="mb-4 text-center">
                          <label class="toggle-switch">
                            <input type="checkbox" id="userRoleToggle" />
                            <span class="slider round"></span>
                          </label>
                          <div class="role-label mt-2" id="roleLabel">
                            Client
                          </div>
                        </div>

                        <div class="input-group mb-4">
                          <div class="input-group-prepend">
                            <div class="input-group-text">
                              <i class="fe fe-user"></i>
                            </div>
                          </div>
                          <input
                            type="text"
                            class="form-control"
                            id="name"
                            placeholder="Name"
                            required
                          />
                        </div>

                        <div class="input-group mb-4">
                          <div class="input-group-prepend">
                            <div class="input-group-text">
                              <i class="fe fe-user"></i>
                            </div>
                          </div>
                          <input
                            type="text"
                            class="form-control"
                            id="username"
                            placeholder="Username"
                            required
                          />
                        </div>
                        <div class="input-group mb-4">
                          <div class="input-group-prepend">
                            <div class="input-group-text">
                              <i class="fe fe-mail"></i>
                            </div>
                          </div>
                          <input
                            type="text"
                            class="form-control"
                            id="email"
                            placeholder="Email"
                            required
                          />
                        </div>
                        <div class="input-group mb-4">
                          <div class="input-group-prepend">
                            <div class="input-group-text">
                              <i class="fe fe-lock"></i>
                            </div>
                          </div>
                          <input
                            type="password"
                            class="form-control"
                            id="password"
                            placeholder="Password"
                            required
                          />
                        </div>

                        <!-- Birthday Input -->
                        <div class="input-group mb-4">
                          <div class="input-group-prepend">
                            <div class="input-group-text">
                              <i class="fe fe-calendar"></i>
                            </div>
                          </div>
                          <input
                            type="date"
                            class="form-control"
                            id="birthday"
                            required
                          />
                        </div>

                        <!-- Image Upload -->
                        <div class="input-group mb-4">
                          <div class="input-group-prepend">
                            <div class="input-group-text">
                              <i class="fe fe-image"></i>
                            </div>
                          </div>
                          <input
                            type="file"
                            class="form-control"
                            id="imageInput"
                            accept="image/*"
                          />
                        </div>

                        <div class="form-group">
                          <label class="custom-control custom-checkbox">
                            <input
                              type="checkbox"
                              class="custom-control-input"
                            />
                          </label>
                        </div>
                        <div class="row">
                          <div class="col-12">
                            <button
                              type="button"
                              class="btn btn-primary btn-block px-4"
                              onclick="registerUser()"
                            >
                              Create New Account
                            </button>
                          </div>
                        </div>
                        <div class="text-center pt-4">
                          <div class="font-weight-normal fs-16">
                            You Already have an account
                            <a
                              class="btn-link font-weight-normal"
                              href="login.html"
                              >Login Here</a
                            >
                          </div>
                        </div>
                      </div>
                    </div>
                    <div
                      class="card text-white bg-primary py-5 d-md-down-none page-content mt-0"
                    >
                      <div
                        class="text-center justify-content-center page-single-content"
                      >
                        <div class="box">
                          <div></div>
                          <div></div>
                          <div></div>
                          <div></div>
                          <div></div>
                          <div></div>
                          <div></div>
                          <div></div>
                          <div></div>
                          <div></div>
                        </div>
                        <img src="assets/images/png/login.png" alt="img" />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Jquery js-->
    <script src="assets/js/jquery-3.5.1.min.js"></script>

    <!-- Bootstrap4 js-->
    <script src="assets/plugins/bootstrap/popper.min.js"></script>
    <script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>

    <!--Othercharts js-->
    <script src="assets/plugins/othercharts/jquery.sparkline.min.js"></script>

    <!-- Circle-progress js-->
    <script src="assets/js/circle-progress.min.js"></script>

    <!-- Jquery-rating js-->
    <script src="assets/plugins/rating/jquery.rating-stars.js"></script>
    <!-- Custom js-->
    <script src="assets/js/custom.js"></script>


<script>
  async function registerUser() {
    const name = document.getElementById("name").value.trim();
    const username = document.getElementById("username").value.trim();
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value;
    const birthday = document.getElementById("birthday").value;
    const imageFile = document.getElementById("imageInput").files[0];
    const role = document.getElementById("userRoleToggle").checked ? "Freelancer" : "Client";

    // Validate required fields
    if (!username || !email || !password || !birthday || !name) {
      Swal.fire({
        icon: 'warning',
        title: 'Missing Fields',
        text: 'Please fill in all required fields.',
        confirmButtonColor: '#f39c12'
      });
      return;
    }

    // Convert image to Base64 if selected
    let base64Image = null;
    if (imageFile) {
      base64Image = await toBase64(imageFile);
    }

    // Prepare data
    const formData = new URLSearchParams();
    formData.append("name", name);
    formData.append("username", username);
    formData.append("email", email);
    formData.append("password", password);
    formData.append("birthday", birthday);
    formData.append("role", role);
    if (base64Image) {
      formData.append("image", base64Image);
    }

    try {
      const response = await fetch("http://localhost:6060/users/register", {
        method: "POST",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded",
        },
        body: formData.toString(),
      });

      let resultText = await response.text();

      if (response.ok) {
        const result = JSON.parse(resultText);
        Swal.fire({
          icon: 'success',
          title: 'Registration Successful',
          text: result.message,
          confirmButtonColor: '#4CAF50'
        }).then(() => {
          window.location.href = "http://localhost:8012/myPro/BuildPro/BuildProFrontEnd/login.html";
        });
      } else {
        console.error("Server returned an error page or HTML:", resultText);
        Swal.fire({
          icon: 'error',
          title: 'Registration Failed',
          text: 'Server returned an error or invalid response.',
          confirmButtonColor: '#d33'
        });
      }

    } catch (error) {
      console.error("Error:", error);
      Swal.fire({
        icon: 'error',
        title: 'Network Error',
        text: 'An error occurred while registering the user.',
        confirmButtonColor: '#d33'
      });
    }
  }

  // Utility to convert image to Base64
  function toBase64(file) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.readAsDataURL(file);
      reader.onload = () => resolve(reader.result.split(",")[1]);
      reader.onerror = (error) => reject(error);
    });
  }
</script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const toggle = document.getElementById("userRoleToggle");
        const label = document.getElementById("roleLabel");

        toggle.addEventListener("change", () => {
          label.textContent = toggle.checked ? "Freelancer" : "Client";
        });
      });

      // To get the role in registerUser():
      const role = document.getElementById("userRoleToggle").checked
        ? "Freelancer"
        : "Client";
    </script>
  </body>

  <!-- Mirrored from laravel.spruko.com/BuildPro/Vertical-IconSidedar-Light/register-3 by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 21 Apr 2025 05:58:47 GMT -->
</html>
